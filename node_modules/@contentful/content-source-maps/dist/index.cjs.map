{"version":3,"file":"index.cjs","sources":["../../../node_modules/@vercel/stega/dist/index.mjs","../src/encode.ts","../../../node_modules/foreach/index.js","../../../node_modules/json-pointer/index.js","../src/richText.ts","../src/utils.ts","../src/graphql/encodeGraphQLResponse.ts","../src/rest/encodeCPAResponse.ts"],"sourcesContent":["var s={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},c={0:8203,1:8204,2:8205,3:65279},u=new Array(4).fill(String.fromCodePoint(c[0])).join(\"\"),m=String.fromCharCode(0);function E(t){let e=JSON.stringify(t);return`${u}${Array.from(e).map(r=>{let n=r.charCodeAt(0);if(n>255)throw new Error(`Only ASCII edit info can be encoded. Error attempting to encode ${e} on character ${r} (${n})`);return Array.from(n.toString(4).padStart(4,\"0\")).map(o=>String.fromCodePoint(c[o])).join(\"\")}).join(\"\")}`}function y(t){let e=JSON.stringify(t);return Array.from(e).map(r=>{let n=r.charCodeAt(0);if(n>255)throw new Error(`Only ASCII edit info can be encoded. Error attempting to encode ${e} on character ${r} (${n})`);return Array.from(n.toString(16).padStart(2,\"0\")).map(o=>String.fromCodePoint(s[o])).join(\"\")}).join(\"\")}function I(t){return!Number.isNaN(Number(t))||/[a-z]/i.test(t)&&!/\\d+(?:[-:\\/]\\d+){2}(?:T\\d+(?:[-:\\/]\\d+){1,2}(\\.\\d+)?Z?)?/.test(t)?!1:Boolean(Date.parse(t))}function T(t){try{new URL(t,t.startsWith(\"/\")?\"https://acme.com\":void 0)}catch{return!1}return!0}function C(t,e,r=\"auto\"){return r===!0||r===\"auto\"&&(I(t)||T(t))?t:`${t}${E(e)}`}var x=Object.fromEntries(Object.entries(c).map(t=>t.reverse())),g=Object.fromEntries(Object.entries(s).map(t=>t.reverse())),S=`${Object.values(s).map(t=>`\\\\u{${t.toString(16)}}`).join(\"\")}`,f=new RegExp(`[${S}]{4,}`,\"gu\");function G(t){let e=t.match(f);if(!!e)return h(e[0],!0)[0]}function $(t){let e=t.match(f);if(!!e)return e.map(r=>h(r)).flat()}function h(t,e=!1){let r=Array.from(t);if(r.length%2===0){if(r.length%4||!t.startsWith(u))return A(r,e)}else throw new Error(\"Encoded data has invalid length\");let n=[];for(let o=r.length*.25;o--;){let p=r.slice(o*4,o*4+4).map(d=>x[d.codePointAt(0)]).join(\"\");n.unshift(String.fromCharCode(parseInt(p,4)))}if(e){n.shift();let o=n.indexOf(m);return o===-1&&(o=n.length),[JSON.parse(n.slice(0,o).join(\"\"))]}return n.join(\"\").split(m).filter(Boolean).map(o=>JSON.parse(o))}function A(t,e){var d;let r=[];for(let i=t.length*.5;i--;){let a=`${g[t[i*2].codePointAt(0)]}${g[t[i*2+1].codePointAt(0)]}`;r.unshift(String.fromCharCode(parseInt(a,16)))}let n=[],o=[r.join(\"\")],p=10;for(;o.length;){let i=o.shift();try{if(n.push(JSON.parse(i)),e)return n}catch(a){if(!p--)throw a;let l=+((d=a.message.match(/\\sposition\\s(\\d+)$/))==null?void 0:d[1]);if(!l)throw a;o.unshift(i.substring(0,l),i.substring(l))}}return n}function _(t){var e;return{cleaned:t.replace(f,\"\"),encoded:((e=t.match(f))==null?void 0:e[0])||\"\"}}function O(t){return t&&JSON.parse(_(JSON.stringify(t)).cleaned)}export{f as VERCEL_STEGA_REGEX,y as legacyStegaEncode,O as vercelStegaClean,C as vercelStegaCombine,G as vercelStegaDecode,$ as vercelStegaDecodeAll,E as vercelStegaEncode,_ as vercelStegaSplit};\n","import {\n  vercelStegaCombine,\n  vercelStegaDecode,\n  vercelStegaEncode,\n  vercelStegaSplit,\n} from '@vercel/stega';\n\nimport type { SourceMapMetadata } from './types.js';\n\nexport function combine(text: string, metadata: SourceMapMetadata): string {\n  return vercelStegaCombine(text, metadata);\n}\n\nexport function encode(metadata: SourceMapMetadata): string {\n  return vercelStegaEncode(metadata);\n}\n\nexport function decode(text: string): SourceMapMetadata | undefined {\n  return vercelStegaDecode(text);\n}\n\nexport function splitEncoding(text: string): {\n  /** The original string with encoded substring removed */\n  cleaned: string;\n  /** The encoded substring from the original string */\n  encoded: string;\n} {\n  return vercelStegaSplit(text);\n}\n","\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\n\nmodule.exports = function forEach (obj, fn, ctx) {\n    if (toString.call(fn) !== '[object Function]') {\n        throw new TypeError('iterator must be a function');\n    }\n    var l = obj.length;\n    if (l === +l) {\n        for (var i = 0; i < l; i++) {\n            fn.call(ctx, obj[i], i, obj);\n        }\n    } else {\n        for (var k in obj) {\n            if (hasOwn.call(obj, k)) {\n                fn.call(ctx, obj[k], k, obj);\n            }\n        }\n    }\n};\n\n","'use strict';\n\nvar each = require('foreach');\nmodule.exports = api;\n\n\n/**\n * Convenience wrapper around the api.\n * Calls `.get` when called with an `object` and a `pointer`.\n * Calls `.set` when also called with `value`.\n * If only supplied `object`, returns a partially applied function, mapped to the object.\n *\n * @param {Object} obj\n * @param {String|Array} pointer\n * @param value\n * @returns {*}\n */\n\nfunction api (obj, pointer, value) {\n    // .set()\n    if (arguments.length === 3) {\n        return api.set(obj, pointer, value);\n    }\n    // .get()\n    if (arguments.length === 2) {\n        return api.get(obj, pointer);\n    }\n    // Return a partially applied function on `obj`.\n    var wrapped = api.bind(api, obj);\n\n    // Support for oo style\n    for (var name in api) {\n        if (api.hasOwnProperty(name)) {\n            wrapped[name] = api[name].bind(wrapped, obj);\n        }\n    }\n    return wrapped;\n}\n\n\n/**\n * Lookup a json pointer in an object\n *\n * @param {Object} obj\n * @param {String|Array} pointer\n * @returns {*}\n */\napi.get = function get (obj, pointer) {\n    var refTokens = Array.isArray(pointer) ? pointer : api.parse(pointer);\n\n    for (var i = 0; i < refTokens.length; ++i) {\n        var tok = refTokens[i];\n        if (!(typeof obj == 'object' && tok in obj)) {\n            throw new Error('Invalid reference token: ' + tok);\n        }\n        obj = obj[tok];\n    }\n    return obj;\n};\n\n/**\n * Sets a value on an object\n *\n * @param {Object} obj\n * @param {String|Array} pointer\n * @param value\n */\napi.set = function set (obj, pointer, value) {\n    var refTokens = Array.isArray(pointer) ? pointer : api.parse(pointer),\n      nextTok = refTokens[0];\n\n    if (refTokens.length === 0) {\n      throw Error('Can not set the root object');\n    }\n\n    for (var i = 0; i < refTokens.length - 1; ++i) {\n        var tok = refTokens[i];\n        if (typeof tok !== 'string' && typeof tok !== 'number') {\n          tok = String(tok)\n        }\n        if (tok === \"__proto__\" || tok === \"constructor\" || tok === \"prototype\") {\n            continue\n        }\n        if (tok === '-' && Array.isArray(obj)) {\n          tok = obj.length;\n        }\n        nextTok = refTokens[i + 1];\n\n        if (!(tok in obj)) {\n            if (nextTok.match(/^(\\d+|-)$/)) {\n                obj[tok] = [];\n            } else {\n                obj[tok] = {};\n            }\n        }\n        obj = obj[tok];\n    }\n    if (nextTok === '-' && Array.isArray(obj)) {\n      nextTok = obj.length;\n    }\n    obj[nextTok] = value;\n    return this;\n};\n\n/**\n * Removes an attribute\n *\n * @param {Object} obj\n * @param {String|Array} pointer\n */\napi.remove = function (obj, pointer) {\n    var refTokens = Array.isArray(pointer) ? pointer : api.parse(pointer);\n    var finalToken = refTokens[refTokens.length -1];\n    if (finalToken === undefined) {\n        throw new Error('Invalid JSON pointer for remove: \"' + pointer + '\"');\n    }\n\n    var parent = api.get(obj, refTokens.slice(0, -1));\n    if (Array.isArray(parent)) {\n      var index = +finalToken;\n      if (finalToken === '' && isNaN(index)) {\n        throw new Error('Invalid array index: \"' + finalToken + '\"');\n      }\n\n      Array.prototype.splice.call(parent, index, 1);\n    } else {\n      delete parent[finalToken];\n    }\n};\n\n/**\n * Returns a (pointer -> value) dictionary for an object\n *\n * @param obj\n * @param {function} descend\n * @returns {}\n */\napi.dict = function dict (obj, descend) {\n    var results = {};\n    api.walk(obj, function (value, pointer) {\n        results[pointer] = value;\n    }, descend);\n    return results;\n};\n\n/**\n * Iterates over an object\n * Iterator: function (value, pointer) {}\n *\n * @param obj\n * @param {function} iterator\n * @param {function} descend\n */\napi.walk = function walk (obj, iterator, descend) {\n    var refTokens = [];\n\n    descend = descend || function (value) {\n        var type = Object.prototype.toString.call(value);\n        return type === '[object Object]' || type === '[object Array]';\n    };\n\n    (function next (cur) {\n        each(cur, function (value, key) {\n            refTokens.push(String(key));\n            if (descend(value)) {\n                next(value);\n            } else {\n                iterator(value, api.compile(refTokens));\n            }\n            refTokens.pop();\n        });\n    }(obj));\n};\n\n/**\n * Tests if an object has a value for a json pointer\n *\n * @param obj\n * @param pointer\n * @returns {boolean}\n */\napi.has = function has (obj, pointer) {\n    try {\n        api.get(obj, pointer);\n    } catch (e) {\n        return false;\n    }\n    return true;\n};\n\n/**\n * Escapes a reference token\n *\n * @param str\n * @returns {string}\n */\napi.escape = function escape (str) {\n    return str.toString().replace(/~/g, '~0').replace(/\\//g, '~1');\n};\n\n/**\n * Unescapes a reference token\n *\n * @param str\n * @returns {string}\n */\napi.unescape = function unescape (str) {\n    return str.replace(/~1/g, '/').replace(/~0/g, '~');\n};\n\n/**\n * Converts a json pointer into a array of reference tokens\n *\n * @param pointer\n * @returns {Array}\n */\napi.parse = function parse (pointer) {\n    if (pointer === '') { return []; }\n    if (pointer.charAt(0) !== '/') { throw new Error('Invalid JSON pointer: ' + pointer); }\n    return pointer.substring(1).split(/\\//).map(api.unescape);\n};\n\n/**\n * Builds a json pointer from a array of reference tokens\n *\n * @param refTokens\n * @returns {string}\n */\napi.compile = function compile (refTokens) {\n    if (refTokens.length === 0) { return ''; }\n    return '/' + refTokens.map(api.escape).join('/');\n};\n","import type { Block, Inline, Node } from '@contentful/rich-text-types';\nimport { get, set } from 'json-pointer';\n\nimport { combine } from './encode.js';\nimport type { CPAMappings, GraphQLMappings, SourceMapMetadata } from './types.js';\n\nexport const encodeRichTextValue = ({\n  pointer,\n  mappings,\n  data,\n  hiddenStrings,\n}: {\n  pointer: string;\n  mappings: CPAMappings | GraphQLMappings;\n  data: Node;\n  hiddenStrings: SourceMapMetadata;\n}) => {\n  const source = mappings[pointer];\n\n  // Only proceed with mapping if we have a valid source\n  if (source) {\n    // We can now safely delete the original pointer as we've preserved the source\n    delete mappings[pointer];\n\n    const textNodes = findRichTextNodes(data, pointer);\n    for (const textNode of textNodes) {\n      mappings[textNode] = source;\n      const currentTextNodeValue = get(data, textNode);\n      const encodedValue = combine(currentTextNodeValue, hiddenStrings);\n      set(data, textNode, encodedValue);\n    }\n  } else {\n    // If there's no source mapping, just encode the text nodes without creating mappings\n    const textNodes = findRichTextNodes(data, pointer);\n    for (const textNode of textNodes) {\n      const currentTextNodeValue = get(data, textNode);\n      const encodedValue = combine(currentTextNodeValue, hiddenStrings);\n      set(data, textNode, encodedValue);\n    }\n  }\n};\n\nfunction isNode(node: Node): node is Block | Inline {\n  return 'content' in node && !!node.content;\n}\n\nconst findRichTextNodes = (data: Node, currentPath = ''): string[] => {\n  const textNodes = [];\n  const node = get(data, currentPath);\n\n  if (isNode(node)) {\n    for (let i = 0; i < node.content.length; i++) {\n      if (node.content[i].nodeType === 'text') {\n        textNodes.push(`${currentPath}/content/${i}/value`);\n      } else {\n        textNodes.push(...findRichTextNodes(data, `${currentPath}/content/${i}`));\n      }\n    }\n  }\n\n  return textNodes;\n};\n","import { set } from 'json-pointer';\n\nimport { combine } from './encode.js';\nimport { encodeRichTextValue } from './richText.js';\nimport type {\n  CPAAsset,\n  CPAEntry,\n  CPAMappings,\n  CreateSourceMapParams,\n  FieldType,\n  GraphQLMappings,\n  GraphQLResponse,\n  SourceMapMetadata,\n  WidgetId,\n  WidgetNamespace,\n} from './types.js';\n\nexport const createSourceMapMetadata = ({\n  entityId,\n  entityType,\n  space,\n  environment,\n  field,\n  locale,\n  editorInterface,\n  fieldType,\n  targetOrigin,\n  platform,\n}: CreateSourceMapParams): SourceMapMetadata => {\n  const targetOriginUrl = targetOrigin || 'https://app.contentful.com';\n  const basePath = `${targetOriginUrl}/spaces/${space}/environments/${environment}`;\n  const entityRoute = entityType === 'Entry' ? 'entries' : 'assets';\n  const href = `${basePath}/${entityRoute}/${entityId}/?focusedField=${field}&focusedLocale=${locale}&source=vercel-content-link`;\n\n  const result: SourceMapMetadata = {\n    origin: 'contentful.com',\n    href,\n    contentful: {\n      editorInterface,\n      fieldType,\n    },\n  };\n\n  // If the user has specified a platform, we remove the fields that are not relevant to that platform\n  if (platform === 'vercel') {\n    delete result.contentful;\n  }\n\n  return result;\n};\n\nexport const isBuiltinNamespace = (namespace: WidgetNamespace) =>\n  ['builtin', 'sidebar-builtin', 'editor-builtin'].includes(namespace);\nexport const isSupportedWidget = (widgetId: WidgetId) => SUPPORTED_WIDGETS.includes(widgetId);\n\n/**\n * Clones the incoming element into a new one, to prevent modification on the original object\n * Hint: It uses the structuredClone which is only available in modern browsers,\n * for older one it uses the JSON.parse(JSON.stringify) hack.\n */\nexport function clone<T extends Record<string, unknown> | Array<unknown>>(incoming: T): T {\n  if (typeof structuredClone === 'function') {\n    return structuredClone(incoming);\n  }\n\n  try {\n    return JSON.parse(JSON.stringify(incoming));\n  } catch (err) {\n    console.warn('Failed to clone data:', incoming, err);\n    return incoming;\n  }\n}\n\nexport const SUPPORTED_WIDGETS: WidgetId[] = [\n  'singleLine',\n  'tagEditor',\n  'listInput',\n  'checkbox',\n  'richTextEditor',\n  'multipleLine',\n];\n\nexport function encodeField(\n  fieldType: FieldType,\n  currentValue: any,\n  hiddenStrings: SourceMapMetadata,\n  target: GraphQLResponse | CPAEntry | CPAAsset,\n  pointer: string,\n  mappings: CPAMappings | GraphQLMappings,\n  locale?: string,\n) {\n  // Determine the value based on locale (if provided)\n  const value = locale ? currentValue[locale] : currentValue;\n\n  // Process based on fieldType\n  switch (fieldType) {\n    case 'Symbol': {\n      const encodedValue = combine(value, hiddenStrings);\n      set(target, pointer, encodedValue);\n      break;\n    }\n\n    case 'Text': {\n      const encodedValue = combine(value, hiddenStrings);\n      set(target, pointer, encodedValue);\n      break;\n    }\n\n    case 'RichText': {\n      encodeRichTextValue({\n        pointer: '',\n        mappings,\n        data: value,\n        hiddenStrings,\n      });\n      break;\n    }\n\n    case 'Array': {\n      const encodedArray = value.map((item: unknown) => {\n        if (typeof item === 'string') {\n          return combine(item, hiddenStrings);\n        } else {\n          return item; // Return the item unchanged if it's not a string\n        }\n      });\n      set(target, pointer, encodedArray);\n      break;\n    }\n  }\n}\n","import { get, has } from 'json-pointer';\n\nimport type { CreateSourceMapParams } from '../types.js';\nimport {\n  clone,\n  createSourceMapMetadata,\n  encodeField,\n  isBuiltinNamespace,\n  isSupportedWidget,\n} from '../utils.js';\n\nexport const encodeGraphQLResponse = <TResponse extends { data: any; extensions: any }>(\n  originalGraphqlResponse: TResponse,\n  targetOrigin?: CreateSourceMapParams['targetOrigin'],\n  platform?: CreateSourceMapParams['platform'],\n): TResponse => {\n  if (\n    !originalGraphqlResponse ||\n    !originalGraphqlResponse.extensions ||\n    !originalGraphqlResponse.extensions.contentSourceMaps\n  ) {\n    console.error(\n      'GraphQL response does not contain Content Source Maps information.',\n      originalGraphqlResponse,\n    );\n    return originalGraphqlResponse;\n  }\n  const modifiedGraphqlResponse = clone(originalGraphqlResponse);\n  const {\n    spaces,\n    environments,\n    editorInterfaces,\n    fields,\n    locales,\n    entries,\n    assets,\n    mappings,\n    fieldTypes,\n  } = modifiedGraphqlResponse.extensions.contentSourceMaps;\n  const target = modifiedGraphqlResponse;\n\n  for (const pointer in mappings) {\n    const { source } = mappings[pointer];\n\n    const entity = 'entry' in source ? entries[source.entry] : assets[source.asset];\n    const entityType = 'entry' in source ? 'Entry' : 'Asset';\n\n    if (!entity) {\n      return modifiedGraphqlResponse;\n    }\n\n    const space = spaces[entity.space];\n    const environment = environments[entity.environment];\n    const entityId = entity.id;\n    const field = fields[source.field];\n    const locale = locales[source.locale];\n    const editorInterface = editorInterfaces[source.editorInterface];\n    const fieldType = fieldTypes[source.fieldType];\n\n    // Skip unsupported widgets\n    if (\n      isBuiltinNamespace(editorInterface.widgetNamespace) &&\n      !isSupportedWidget(editorInterface.widgetId)\n    ) {\n      continue;\n    }\n\n    if (has(target, pointer)) {\n      const currentValue = get(target, pointer);\n\n      if (currentValue !== null) {\n        const hiddenStrings = createSourceMapMetadata({\n          entityId,\n          entityType,\n          space,\n          environment,\n          field,\n          locale,\n          editorInterface,\n          fieldType,\n          targetOrigin,\n          platform,\n        });\n\n        encodeField(fieldType, currentValue, hiddenStrings, target, pointer, mappings);\n      }\n    } else {\n      //@TODO - add Sentry logging\n      // console.warn(`Pointer ${pointer} not found in the entry`, target);\n    }\n  }\n  return modifiedGraphqlResponse;\n};\n","import { get, has } from 'json-pointer';\n\nimport type {\n  CPAEntry,\n  CPAEntryCollection,\n  EditorInterfaceSource,\n  FieldType,\n  CreateSourceMapParams,\n  CPAAsset,\n} from '../types.js';\nimport {\n  clone,\n  createSourceMapMetadata,\n  encodeField,\n  isBuiltinNamespace,\n  isSupportedWidget,\n} from '../utils.js';\n\nconst applyEncoding = (\n  target: CPAEntry | CPAAsset,\n  fieldTypes: FieldType[],\n  editorInterfaces: EditorInterfaceSource[],\n  targetOrigin?: CreateSourceMapParams['targetOrigin'],\n  platform?: CreateSourceMapParams['platform'],\n) => {\n  if (!target.fields) {\n    return;\n  }\n\n  const { contentSourceMaps } = target.sys;\n\n  // Skip if there are no source maps\n  // For example if an entry has only one unsupported field\n  if (!contentSourceMaps) {\n    return;\n  }\n\n  const { mappings } = contentSourceMaps;\n\n  for (const pointer in mappings) {\n    const { source } = mappings[pointer];\n    const space = target.sys.space.sys.id;\n    const environment = target.sys.environment.sys.id;\n    const entityId = target.sys.id;\n    const entityType = target.sys.type;\n    const fieldType = fieldTypes[source.fieldType];\n    const editorInterface = editorInterfaces[source.editorInterface];\n\n    // Skip unsupported widgets\n    if (\n      isBuiltinNamespace(editorInterface.widgetNamespace) &&\n      !isSupportedWidget(editorInterface.widgetId)\n    ) {\n      continue;\n    }\n\n    const formattedPointer = pointer.startsWith('/') ? pointer : `/${pointer}`;\n\n    if (has(target, formattedPointer)) {\n      const currentValue = get(target, formattedPointer);\n      if (currentValue === null) {\n        return;\n      }\n      const fieldParts = formattedPointer.split('/'); // Split the pointer into parts\n      const field = fieldParts.pop(); // Get the last part, which is the field name\n      if (!field) {\n        console.error('Field name could not be extracted from the pointer', formattedPointer);\n        return;\n      }\n      const locale = target.sys.locale;\n\n      // Determine if we are dealing with multiple locale values in the response or just a single locale\n      if (locale) {\n        const hiddenStrings = createSourceMapMetadata({\n          entityId,\n          entityType,\n          space,\n          environment,\n          field,\n          locale,\n          editorInterface,\n          fieldType,\n          targetOrigin,\n          platform,\n        });\n\n        encodeField(fieldType, currentValue, hiddenStrings, target, formattedPointer, mappings);\n      } else {\n        const locales = Object.keys(currentValue);\n        locales.forEach((locale) => {\n          const hiddenStrings = createSourceMapMetadata({\n            entityId,\n            entityType,\n            space,\n            environment,\n            field,\n            locale,\n            editorInterface,\n            fieldType,\n            targetOrigin,\n            platform,\n          });\n\n          encodeField(\n            fieldType,\n            currentValue,\n            hiddenStrings,\n            target,\n            `${formattedPointer}/${locale}`,\n            mappings,\n            locale,\n          );\n        });\n      }\n    } else {\n      //@TODO - add Sentry logging\n      // console.warn(`Pointer ${pointer} not found in the entry`, target);\n    }\n  }\n};\n\nexport const encodeCPAResponse = (\n  CPAResponse: CPAEntry | CPAEntryCollection,\n  targetOrigin?: CreateSourceMapParams['targetOrigin'],\n  platform?: CreateSourceMapParams['platform'],\n): CPAEntry | CPAEntryCollection => {\n  const modifiedCPAResponse = clone(\n    CPAResponse as unknown as Record<string, unknown>,\n  ) as unknown as CPAEntry | CPAEntryCollection;\n\n  // Entity collections\n  if (modifiedCPAResponse.sys && 'items' in (modifiedCPAResponse as CPAEntryCollection)) {\n    const collection = modifiedCPAResponse as CPAEntryCollection;\n    if (!collection.sys?.contentSourceMapsLookup) {\n      return collection;\n    }\n    const {\n      contentSourceMapsLookup: { fieldTypes, editorInterfaces },\n    } = collection.sys;\n    const { items, includes } = collection;\n\n    items.forEach((target) =>\n      applyEncoding(target, fieldTypes, editorInterfaces, targetOrigin, platform),\n    );\n    if (includes && includes.Entry) {\n      includes.Entry.forEach((entry) =>\n        applyEncoding(entry, fieldTypes, editorInterfaces, targetOrigin, platform),\n      );\n    }\n    if (includes && includes.Asset) {\n      includes.Asset.forEach((asset) =>\n        applyEncoding(asset, fieldTypes, editorInterfaces, targetOrigin, platform),\n      );\n    }\n    // Single entity\n  } else {\n    const entry = modifiedCPAResponse as CPAEntry;\n    if (!entry.sys.contentSourceMapsLookup) {\n      console.error('Content source maps lookup data is missing');\n      return entry;\n    }\n\n    applyEncoding(\n      entry,\n      entry.sys.contentSourceMapsLookup.fieldTypes,\n      entry.sys.contentSourceMapsLookup.editorInterfaces,\n      targetOrigin,\n      platform,\n    );\n  }\n\n  return modifiedCPAResponse;\n};\n"],"names":["s","c","u","m","E","e","r","n","o","I","T","C","x","g","S","f","G","h","A","p","d","a","l","_","combine","text","metadata","vercelStegaCombine","encode","vercelStegaEncode","decode","vercelStegaDecode","splitEncoding","vercelStegaSplit","hasOwn","toString","foreach","obj","fn","ctx","k","each","require$$0","jsonPointer","api","pointer","value","wrapped","name","refTokens","i","tok","nextTok","finalToken","parent","index","descend","results","iterator","type","next","cur","key","str","encodeRichTextValue","mappings","data","hiddenStrings","source","textNodes","findRichTextNodes","textNode","currentTextNodeValue","get","encodedValue","set","isNode","node","currentPath","createSourceMapMetadata","entityId","entityType","space","environment","field","locale","editorInterface","fieldType","targetOrigin","platform","result","isBuiltinNamespace","namespace","isSupportedWidget","widgetId","SUPPORTED_WIDGETS","clone","incoming","err","encodeField","currentValue","target","encodedArray","item","encodeGraphQLResponse","originalGraphqlResponse","modifiedGraphqlResponse","spaces","environments","editorInterfaces","fields","locales","entries","assets","fieldTypes","entity","has","applyEncoding","contentSourceMaps","formattedPointer","encodeCPAResponse","CPAResponse","modifiedCPAResponse","collection","_a","items","includes","entry","asset"],"mappings":"gFAAA,IAAIA,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAEC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAEC,EAAE,IAAI,MAAM,CAAC,EAAE,KAAK,OAAO,cAAcD,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAEE,EAAE,KAAuB,SAASC,EAAE,EAAE,CAAC,IAAIC,EAAE,KAAK,UAAU,CAAC,EAAE,MAAM,GAAGH,CAAC,GAAG,MAAM,KAAKG,CAAC,EAAE,IAAIC,GAAG,CAAC,IAAIC,EAAED,EAAE,WAAW,CAAC,EAAE,GAAGC,EAAE,IAAI,MAAM,IAAI,MAAM,mEAAmEF,CAAC,iBAAiBC,CAAC,KAAKC,CAAC,GAAG,EAAE,OAAO,MAAM,KAAKA,EAAE,SAAS,CAAC,EAAE,SAAS,EAAE,GAAG,CAAC,EAAE,IAAIC,GAAG,OAAO,cAAcP,EAAEO,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAA6T,SAASC,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,MAAM,OAAO,CAAC,CAAC,GAAG,SAAS,KAAK,CAAC,GAAG,CAAC,2DAA2D,KAAK,CAAC,EAAE,GAAG,EAAQ,KAAK,MAAM,CAAC,CAAE,CAAC,SAASC,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,EAAE,mBAAmB,MAAM,CAAC,OAAML,EAAA,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,SAASM,EAAE,EAAEN,EAAEC,EAAE,OAAO,CAAC,OAAOA,IAAI,IAAIA,IAAI,SAASG,EAAE,CAAC,GAAGC,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,GAAGN,EAAEC,CAAC,CAAC,EAAE,CAAC,IAAIO,EAAE,OAAO,YAAY,OAAO,QAAQX,CAAC,EAAE,IAAI,GAAG,EAAE,QAAO,CAAE,CAAC,EAAEY,EAAE,OAAO,YAAY,OAAO,QAAQb,CAAC,EAAE,IAAI,GAAG,EAAE,QAAO,CAAE,CAAC,EAAEc,EAAE,GAAG,OAAO,OAAOd,CAAC,EAAE,IAAI,GAAG,OAAO,EAAE,SAAS,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,GAAGe,EAAE,IAAI,OAAO,IAAID,CAAC,QAAQ,IAAI,EAAE,SAASE,GAAE,EAAE,CAAC,IAAIX,EAAE,EAAE,MAAMU,CAAC,EAAE,GAAKV,EAAE,OAAOY,GAAEZ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAoE,SAASY,GAAE,EAAEZ,EAAE,GAAG,CAAC,IAAIC,EAAE,MAAM,KAAK,CAAC,EAAE,GAAGA,EAAE,OAAO,IAAI,GAAG,GAAGA,EAAE,OAAO,GAAG,CAAC,EAAE,WAAWJ,CAAC,EAAE,OAAOgB,GAAEZ,EAAED,CAAC,MAAO,OAAM,IAAI,MAAM,iCAAiC,EAAE,IAAIE,EAAE,CAAA,EAAG,QAAQC,EAAEF,EAAE,OAAO,IAAIE,KAAK,CAAC,IAAIW,EAAEb,EAAE,MAAME,EAAE,EAAEA,EAAE,EAAE,CAAC,EAAE,IAAIY,GAAGR,EAAEQ,EAAE,YAAY,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAEb,EAAE,QAAQ,OAAO,aAAa,SAASY,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGd,EAAE,CAACE,EAAE,MAAK,EAAG,IAAIC,EAAED,EAAE,QAAQJ,CAAC,EAAE,OAAOK,IAAI,KAAKA,EAAED,EAAE,QAAQ,CAAC,KAAK,MAAMA,EAAE,MAAM,EAAEC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,OAAOD,EAAE,KAAK,EAAE,EAAE,MAAMJ,CAAC,EAAE,OAAO,OAAO,EAAE,IAAIK,GAAG,KAAK,MAAMA,CAAC,CAAC,CAAC,CAAC,SAASU,GAAE,EAAEb,EAAE,CAAC,IAAIe,EAAE,IAAId,EAAE,CAAA,EAAG,QAAQ,EAAE,EAAE,OAAO,GAAG,KAAK,CAAC,IAAIe,EAAE,GAAGR,EAAE,EAAE,EAAE,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC,GAAGA,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC,GAAGP,EAAE,QAAQ,OAAO,aAAa,SAASe,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAId,EAAE,CAAA,EAAGC,EAAE,CAACF,EAAE,KAAK,EAAE,CAAC,EAAEa,EAAE,GAAG,KAAKX,EAAE,QAAQ,CAAC,IAAI,EAAEA,EAAE,MAAK,EAAG,GAAG,CAAC,GAAGD,EAAE,KAAK,KAAK,MAAM,CAAC,CAAC,EAAEF,EAAE,OAAOE,CAAC,OAAOc,EAAE,CAAC,GAAG,CAACF,IAAI,MAAME,EAAE,IAAIC,EAAE,GAAGF,EAAEC,EAAE,QAAQ,MAAM,oBAAoB,IAAI,KAAK,OAAOD,EAAE,CAAC,GAAG,GAAG,CAACE,EAAE,MAAMD,EAAEb,EAAE,QAAQ,EAAE,UAAU,EAAEc,CAAC,EAAE,EAAE,UAAUA,CAAC,CAAC,CAAC,CAAC,CAAC,OAAOf,CAAC,CAAC,SAASgB,GAAE,EAAE,CAAC,IAAIlB,EAAE,MAAM,CAAC,QAAQ,EAAE,QAAQU,EAAE,EAAE,EAAE,UAAUV,EAAE,EAAE,MAAMU,CAAC,IAAI,KAAK,OAAOV,EAAE,CAAC,IAAI,EAAE,CAAC,CCSzgF,SAASmB,EAAQC,EAAcC,EAAqC,CACzE,OAAOC,EAAmBF,EAAMC,CAAQ,CAC1C,CAEO,SAASE,GAAOF,EAAqC,CAC1D,OAAOG,EAAkBH,CAAQ,CACnC,CAEO,SAASI,GAAOL,EAA6C,CAClE,OAAOM,GAAkBN,CAAI,CAC/B,CAEO,SAASO,GAAcP,EAK5B,CACA,OAAOQ,GAAiBR,CAAI,CAC9B,yCC3BA,IAAIS,EAAS,OAAO,UAAU,eAC1BC,EAAW,OAAO,UAAU,SAEhC,OAAAC,EAAiB,SAAkBC,EAAKC,EAAIC,EAAK,CAC7C,GAAIJ,EAAS,KAAKG,CAAE,IAAM,oBACtB,MAAM,IAAI,UAAU,6BAA6B,EAErD,IAAIhB,EAAIe,EAAI,OACZ,GAAIf,IAAM,CAACA,EACP,QAAS,EAAI,EAAG,EAAIA,EAAG,IACnBgB,EAAG,KAAKC,EAAKF,EAAI,CAAC,EAAG,EAAGA,CAAG,MAG/B,SAASG,KAAKH,EACNH,EAAO,KAAKG,EAAKG,CAAC,GAClBF,EAAG,KAAKC,EAAKF,EAAIG,CAAC,EAAGA,EAAGH,CAAG,CAI3C,4CClBA,IAAII,EAAOC,GAAA,EACXC,EAAiBC,EAejB,SAASA,EAAKP,EAAKQ,EAASC,EAAO,CAE/B,GAAI,UAAU,SAAW,EACrB,OAAOF,EAAI,IAAIP,EAAKQ,EAASC,CAAK,EAGtC,GAAI,UAAU,SAAW,EACrB,OAAOF,EAAI,IAAIP,EAAKQ,CAAO,EAG/B,IAAIE,EAAUH,EAAI,KAAKA,EAAKP,CAAG,EAG/B,QAASW,KAAQJ,EACTA,EAAI,eAAeI,CAAI,IACvBD,EAAQC,CAAI,EAAIJ,EAAII,CAAI,EAAE,KAAKD,EAASV,CAAG,GAGnD,OAAOU,CACX,CAUA,OAAAH,EAAI,IAAM,SAAcP,EAAKQ,EAAS,CAGlC,QAFII,EAAY,MAAM,QAAQJ,CAAO,EAAIA,EAAUD,EAAI,MAAMC,CAAO,EAE3DK,EAAI,EAAGA,EAAID,EAAU,OAAQ,EAAEC,EAAG,CACvC,IAAIC,EAAMF,EAAUC,CAAC,EACrB,GAAI,EAAE,OAAOb,GAAO,UAAYc,KAAOd,GACnC,MAAM,IAAI,MAAM,4BAA8Bc,CAAG,EAErDd,EAAMA,EAAIc,CAAG,CACrB,CACI,OAAOd,CACX,EASAO,EAAI,IAAM,SAAcP,EAAKQ,EAASC,EAAO,CACzC,IAAIG,EAAY,MAAM,QAAQJ,CAAO,EAAIA,EAAUD,EAAI,MAAMC,CAAO,EAClEO,EAAUH,EAAU,CAAC,EAEvB,GAAIA,EAAU,SAAW,EACvB,MAAM,MAAM,6BAA6B,EAG3C,QAASC,EAAI,EAAGA,EAAID,EAAU,OAAS,EAAG,EAAEC,EAAG,CAC3C,IAAIC,EAAMF,EAAUC,CAAC,EACjB,OAAOC,GAAQ,UAAY,OAAOA,GAAQ,WAC5CA,EAAM,OAAOA,CAAG,GAEd,EAAAA,IAAQ,aAAeA,IAAQ,eAAiBA,IAAQ,eAGxDA,IAAQ,KAAO,MAAM,QAAQd,CAAG,IAClCc,EAAMd,EAAI,QAEZe,EAAUH,EAAUC,EAAI,CAAC,EAEnBC,KAAOd,IACLe,EAAQ,MAAM,WAAW,EACzBf,EAAIc,CAAG,EAAI,CAAA,EAEXd,EAAIc,CAAG,EAAI,CAAA,GAGnBd,EAAMA,EAAIc,CAAG,EACrB,CACI,OAAIC,IAAY,KAAO,MAAM,QAAQf,CAAG,IACtCe,EAAUf,EAAI,QAEhBA,EAAIe,CAAO,EAAIN,EACR,IACX,EAQAF,EAAI,OAAS,SAAUP,EAAKQ,EAAS,CACjC,IAAII,EAAY,MAAM,QAAQJ,CAAO,EAAIA,EAAUD,EAAI,MAAMC,CAAO,EAChEQ,EAAaJ,EAAUA,EAAU,OAAQ,CAAC,EAC9C,GAAII,IAAe,OACf,MAAM,IAAI,MAAM,qCAAuCR,EAAU,GAAG,EAGxE,IAAIS,EAASV,EAAI,IAAIP,EAAKY,EAAU,MAAM,EAAG,EAAE,CAAC,EAChD,GAAI,MAAM,QAAQK,CAAM,EAAG,CACzB,IAAIC,EAAQ,CAACF,EACb,GAAIA,IAAe,IAAM,MAAME,CAAK,EAClC,MAAM,IAAI,MAAM,yBAA2BF,EAAa,GAAG,EAG7D,MAAM,UAAU,OAAO,KAAKC,EAAQC,EAAO,CAAC,CAClD,MACM,OAAOD,EAAOD,CAAU,CAE9B,EASAT,EAAI,KAAO,SAAeP,EAAKmB,EAAS,CACpC,IAAIC,EAAU,CAAA,EACd,OAAAb,EAAI,KAAKP,EAAK,SAAUS,EAAOD,EAAS,CACpCY,EAAQZ,CAAO,EAAIC,CAC3B,EAAOU,CAAO,EACHC,CACX,EAUAb,EAAI,KAAO,SAAeP,EAAKqB,EAAUF,EAAS,CAC9C,IAAIP,EAAY,CAAA,EAEhBO,EAAUA,GAAW,SAAUV,EAAO,CAClC,IAAIa,EAAO,OAAO,UAAU,SAAS,KAAKb,CAAK,EAC/C,OAAOa,IAAS,mBAAqBA,IAAS,gBACtD,EAEK,SAASC,EAAMC,EAAK,CACjBpB,EAAKoB,EAAK,SAAUf,EAAOgB,EAAK,CAC5Bb,EAAU,KAAK,OAAOa,CAAG,CAAC,EACtBN,EAAQV,CAAK,EACbc,EAAKd,CAAK,EAEVY,EAASZ,EAAOF,EAAI,QAAQK,CAAS,CAAC,EAE1CA,EAAU,IAAG,CACzB,CAAS,CACT,EAAMZ,CAAG,CACT,EASAO,EAAI,IAAM,SAAcP,EAAKQ,EAAS,CAClC,GAAI,CACAD,EAAI,IAAIP,EAAKQ,CAAO,CAC5B,OAAaxC,EAAG,CACR,MAAO,EACf,CACI,MAAO,EACX,EAQAuC,EAAI,OAAS,SAAiBmB,EAAK,CAC/B,OAAOA,EAAI,SAAQ,EAAG,QAAQ,KAAM,IAAI,EAAE,QAAQ,MAAO,IAAI,CACjE,EAQAnB,EAAI,SAAW,SAAmBmB,EAAK,CACnC,OAAOA,EAAI,QAAQ,MAAO,GAAG,EAAE,QAAQ,MAAO,GAAG,CACrD,EAQAnB,EAAI,MAAQ,SAAgBC,EAAS,CACjC,GAAIA,IAAY,GAAM,MAAO,CAAA,EAC7B,GAAIA,EAAQ,OAAO,CAAC,IAAM,IAAO,MAAM,IAAI,MAAM,yBAA2BA,CAAO,EACnF,OAAOA,EAAQ,UAAU,CAAC,EAAE,MAAM,IAAI,EAAE,IAAID,EAAI,QAAQ,CAC5D,EAQAA,EAAI,QAAU,SAAkBK,EAAW,CACvC,OAAIA,EAAU,SAAW,EAAY,GAC9B,IAAMA,EAAU,IAAIL,EAAI,MAAM,EAAE,KAAK,GAAG,CACnD,eCjOO,MAAMoB,EAAsB,CAAC,CAClC,QAAAnB,EACA,SAAAoB,EACA,KAAAC,EACA,cAAAC,CACF,IAKM,CACJ,MAAMC,EAASH,EAASpB,CAAO,EAG/B,GAAIuB,EAAQ,CAEV,OAAOH,EAASpB,CAAO,EAEvB,MAAMwB,EAAYC,EAAkBJ,EAAMrB,CAAO,EACjD,UAAW0B,KAAYF,EAAW,CAChCJ,EAASM,CAAQ,EAAIH,EACrB,MAAMI,EAAuBC,EAAAA,IAAIP,EAAMK,CAAQ,EACzCG,EAAelD,EAAQgD,EAAsBL,CAAa,EAChEQ,MAAIT,EAAMK,EAAUG,CAAY,CAClC,CACF,KAAO,CAEL,MAAML,EAAYC,EAAkBJ,EAAMrB,CAAO,EACjD,UAAW0B,KAAYF,EAAW,CAChC,MAAMG,EAAuBC,EAAAA,IAAIP,EAAMK,CAAQ,EACzCG,EAAelD,EAAQgD,EAAsBL,CAAa,EAChEQ,MAAIT,EAAMK,EAAUG,CAAY,CAClC,CACF,CACF,EAEA,SAASE,GAAOC,EAAoC,CAClD,MAAO,YAAaA,GAAQ,CAAC,CAACA,EAAK,OACrC,CAEA,MAAMP,EAAoB,CAACJ,EAAYY,EAAc,KAAiB,CACpE,MAAMT,EAAY,CAAA,EACZQ,EAAOJ,EAAAA,IAAIP,EAAMY,CAAW,EAElC,GAAIF,GAAOC,CAAI,EACb,QAAS3B,EAAI,EAAGA,EAAI2B,EAAK,QAAQ,OAAQ3B,IACnC2B,EAAK,QAAQ3B,CAAC,EAAE,WAAa,OAC/BmB,EAAU,KAAK,GAAGS,CAAW,YAAY5B,CAAC,QAAQ,EAElDmB,EAAU,KAAK,GAAGC,EAAkBJ,EAAM,GAAGY,CAAW,YAAY5B,CAAC,EAAE,CAAC,EAK9E,OAAOmB,CACT,EC5CaU,EAA0B,CAAC,CACtC,SAAAC,EACA,WAAAC,EACA,MAAAC,EACA,YAAAC,EACA,MAAAC,EACA,OAAAC,EACA,gBAAAC,EACA,UAAAC,EACA,aAAAC,EACA,SAAAC,CACF,IAAgD,CAM9C,MAAMC,EAA4B,CAChC,OAAQ,iBACR,KAJW,GAFI,GADOF,GAAgB,4BACL,WAAWN,CAAK,iBAAiBC,CAAW,EAEvD,IADJF,IAAe,QAAU,UAAY,QAClB,IAAID,CAAQ,kBAAkBI,CAAK,kBAAkBC,CAAM,8BAKhG,WAAY,CACV,gBAAAC,EACA,UAAAC,CAAA,CACF,EAIF,OAAIE,IAAa,UACf,OAAOC,EAAO,WAGTA,CACT,EAEaC,EAAsBC,GACjC,CAAC,UAAW,kBAAmB,gBAAgB,EAAE,SAASA,CAAS,EACxDC,EAAqBC,GAAuBC,EAAkB,SAASD,CAAQ,EAOrF,SAASE,EAA0DC,EAAgB,CACxF,GAAI,OAAO,iBAAoB,WAC7B,OAAO,gBAAgBA,CAAQ,EAGjC,GAAI,CACF,OAAO,KAAK,MAAM,KAAK,UAAUA,CAAQ,CAAC,CAC5C,OAASC,EAAK,CACZ,eAAQ,KAAK,wBAAyBD,EAAUC,CAAG,EAC5CD,CACT,CACF,CAEO,MAAMF,EAAgC,CAC3C,aACA,YACA,YACA,WACA,iBACA,cACF,EAEO,SAASI,EACdZ,EACAa,EACAjC,EACAkC,EACAxD,EACAoB,EACAoB,EACA,CAEA,MAAMvC,EAAQuC,EAASe,EAAaf,CAAM,EAAIe,EAG9C,OAAQb,EAAA,CACN,IAAK,SAAU,CACb,MAAMb,EAAelD,EAAQsB,EAAOqB,CAAa,EACjDQ,MAAI0B,EAAQxD,EAAS6B,CAAY,EACjC,KACF,CAEA,IAAK,OAAQ,CACX,MAAMA,EAAelD,EAAQsB,EAAOqB,CAAa,EACjDQ,MAAI0B,EAAQxD,EAAS6B,CAAY,EACjC,KACF,CAEA,IAAK,WAAY,CACfV,EAAoB,CAClB,QAAS,GACT,SAAAC,EACA,KAAMnB,EACN,cAAAqB,CAAA,CACD,EACD,KACF,CAEA,IAAK,QAAS,CACZ,MAAMmC,EAAexD,EAAM,IAAKyD,GAC1B,OAAOA,GAAS,SACX/E,EAAQ+E,EAAMpC,CAAa,EAE3BoC,CAEV,EACD5B,MAAI0B,EAAQxD,EAASyD,CAAY,EACjC,KACF,CAAA,CAEJ,CCvHO,MAAME,GAAwB,CACnCC,EACAjB,EACAC,IACc,CACd,GACE,CAACgB,GACD,CAACA,EAAwB,YACzB,CAACA,EAAwB,WAAW,kBAEpC,eAAQ,MACN,qEACAA,CAAA,EAEKA,EAET,MAAMC,EAA0BV,EAAMS,CAAuB,EACvD,CACJ,OAAAE,EACA,aAAAC,EACA,iBAAAC,EACA,OAAAC,EACA,QAAAC,EACA,QAAAC,EACA,OAAAC,EACA,SAAAhD,EACA,WAAAiD,CAAA,EACER,EAAwB,WAAW,kBACjCL,EAASK,EAEf,UAAW7D,KAAWoB,EAAU,CAC9B,KAAM,CAAE,OAAAG,CAAA,EAAWH,EAASpB,CAAO,EAE7BsE,EAAS,UAAW/C,EAAS4C,EAAQ5C,EAAO,KAAK,EAAI6C,EAAO7C,EAAO,KAAK,EACxEa,EAAa,UAAWb,EAAS,QAAU,QAEjD,GAAI,CAAC+C,EACH,OAAOT,EAGT,MAAMxB,EAAQyB,EAAOQ,EAAO,KAAK,EAC3BhC,EAAcyB,EAAaO,EAAO,WAAW,EAC7CnC,EAAWmC,EAAO,GAClB/B,EAAQ0B,EAAO1C,EAAO,KAAK,EAC3BiB,EAAS0B,EAAQ3C,EAAO,MAAM,EAC9BkB,EAAkBuB,EAAiBzC,EAAO,eAAe,EACzDmB,EAAY2B,EAAW9C,EAAO,SAAS,EAG7C,GACE,EAAAuB,EAAmBL,EAAgB,eAAe,GAClD,CAACO,EAAkBP,EAAgB,QAAQ,IAKzC8B,EAAAA,IAAIf,EAAQxD,CAAO,EAAG,CACxB,MAAMuD,EAAe3B,EAAAA,IAAI4B,EAAQxD,CAAO,EAExC,GAAIuD,IAAiB,KAAM,CACzB,MAAMjC,EAAgBY,EAAwB,CAC5C,SAAAC,EACA,WAAAC,EACA,MAAAC,EACA,YAAAC,EACA,MAAAC,EACA,OAAAC,EACA,gBAAAC,EACA,UAAAC,EACA,aAAAC,EACA,SAAAC,CAAA,CACD,EAEDU,EAAYZ,EAAWa,EAAcjC,EAAekC,EAAQxD,EAASoB,CAAQ,CAC/E,CACF,CAIF,CACA,OAAOyC,CACT,EC1EMW,EAAgB,CACpBhB,EACAa,EACAL,EACArB,EACAC,IACG,CACH,GAAI,CAACY,EAAO,OACV,OAGF,KAAM,CAAE,kBAAAiB,GAAsBjB,EAAO,IAIrC,GAAI,CAACiB,EACH,OAGF,KAAM,CAAE,SAAArD,GAAaqD,EAErB,UAAWzE,KAAWoB,EAAU,CAC9B,KAAM,CAAE,OAAAG,CAAA,EAAWH,EAASpB,CAAO,EAC7BqC,EAAQmB,EAAO,IAAI,MAAM,IAAI,GAC7BlB,EAAckB,EAAO,IAAI,YAAY,IAAI,GACzCrB,EAAWqB,EAAO,IAAI,GACtBpB,EAAaoB,EAAO,IAAI,KACxBd,EAAY2B,EAAW9C,EAAO,SAAS,EACvCkB,EAAkBuB,EAAiBzC,EAAO,eAAe,EAG/D,GACEuB,EAAmBL,EAAgB,eAAe,GAClD,CAACO,EAAkBP,EAAgB,QAAQ,EAE3C,SAGF,MAAMiC,EAAmB1E,EAAQ,WAAW,GAAG,EAAIA,EAAU,IAAIA,CAAO,GAExE,GAAIuE,EAAAA,IAAIf,EAAQkB,CAAgB,EAAG,CACjC,MAAMnB,EAAe3B,EAAAA,IAAI4B,EAAQkB,CAAgB,EACjD,GAAInB,IAAiB,KACnB,OAGF,MAAMhB,EADamC,EAAiB,MAAM,GAAG,EACpB,IAAA,EACzB,GAAI,CAACnC,EAAO,CACV,QAAQ,MAAM,qDAAsDmC,CAAgB,EACpF,MACF,CACA,MAAMlC,EAASgB,EAAO,IAAI,OAG1B,GAAIhB,EAAQ,CACV,MAAMlB,EAAgBY,EAAwB,CAC5C,SAAAC,EACA,WAAAC,EACA,MAAAC,EACA,YAAAC,EACA,MAAAC,EACA,OAAAC,EACA,gBAAAC,EACA,UAAAC,EACA,aAAAC,EACA,SAAAC,CAAA,CACD,EAEDU,EAAYZ,EAAWa,EAAcjC,EAAekC,EAAQkB,EAAkBtD,CAAQ,CACxF,MACkB,OAAO,KAAKmC,CAAY,EAChC,QAASf,GAAW,CAC1B,MAAMlB,EAAgBY,EAAwB,CAC5C,SAAAC,EACA,WAAAC,EACA,MAAAC,EACA,YAAAC,EACA,MAAAC,EACA,OAAAC,EACA,gBAAAC,EACA,UAAAC,EACA,aAAAC,EACA,SAAAC,CAAA,CACD,EAEDU,EACEZ,EACAa,EACAjC,EACAkC,EACA,GAAGkB,CAAgB,IAAIlC,CAAM,GAC7BpB,EACAoB,CAAA,CAEJ,CAAC,CAEL,CAIF,CACF,EAEamC,GAAoB,CAC/BC,EACAjC,EACAC,IACkC,OAClC,MAAMiC,EAAsB1B,EAC1ByB,CAAA,EAIF,GAAIC,EAAoB,KAAO,UAAYA,EAA4C,CACrF,MAAMC,EAAaD,EACnB,GAAI,GAACE,EAAAD,EAAW,MAAX,MAAAC,EAAgB,yBACnB,OAAOD,EAET,KAAM,CACJ,wBAAyB,CAAE,WAAAT,EAAY,iBAAAL,CAAA,CAAiB,EACtDc,EAAW,IACT,CAAE,MAAAE,EAAO,SAAAC,CAAA,EAAaH,EAE5BE,EAAM,QAASxB,GACbgB,EAAchB,EAAQa,EAAYL,EAAkBrB,EAAcC,CAAQ,CAAA,EAExEqC,GAAYA,EAAS,OACvBA,EAAS,MAAM,QAASC,GACtBV,EAAcU,EAAOb,EAAYL,EAAkBrB,EAAcC,CAAQ,CAAA,EAGzEqC,GAAYA,EAAS,OACvBA,EAAS,MAAM,QAASE,GACtBX,EAAcW,EAAOd,EAAYL,EAAkBrB,EAAcC,CAAQ,CAAA,CAI/E,KAAO,CACL,MAAMsC,EAAQL,EACd,GAAI,CAACK,EAAM,IAAI,wBACb,eAAQ,MAAM,4CAA4C,EACnDA,EAGTV,EACEU,EACAA,EAAM,IAAI,wBAAwB,WAClCA,EAAM,IAAI,wBAAwB,iBAClCvC,EACAC,CAAA,CAEJ,CAEA,OAAOiC,CACT","x_google_ignoreList":[0,2,3]}